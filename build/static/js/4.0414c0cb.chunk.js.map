{"version":3,"sources":["pages/detail/style.js","markdown/renderer/codeblock/index.js","markdown/index.js","pages/detail/components/stepbar/style.js","pages/detail/components/stepbar/index.js","pages/detail/components/navbar/index.js","pages/detail/index.js"],"names":["styled","div","DetailWrapper","GraphWrapper","props","show","NavBarWrapper","ArticleWrapper","Header","CodeBlock","PureComponent","render","this","language","value","style","coy","defaultProps","MarkdownRenderer","Component","newProps","plugins","RemarkMathPlugin","renderers","code","Codeblock","math","p","Node","inline","inlineMath","Context","input","className","StepBarWrapper","Step","Steps","ReadList","constructor","super","state","showStep","showStepBar","prev","setState","getArticles","readList","changeArticle","articles","toJS","steps","forEach","element","idx","push","title","domain","description","key","onClick","articleIdx","progressDot","current","direction","onChange","connect","getIn","dispatch","console","log","actionCreators","changeArticleIdx","MdNavBar","source","headingTopOffset","TopNavBarHeight","Detail","componentWillUnmount","resetStore","content","showReadList","color","position","bottom","authorName","left","publishTime","readNum","favorArticle","bind","cursor","width","height","src","logoSvg","showArticleIndex","match","params","id","componentDidMount","getDetail","showToolBar","headerActionCreator","changeToolBar","ARTICLE_TOOL_BAR","getReadList","withRouter"],"mappings":"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","file":"static/js/4.0414c0cb.chunk.js","sourcesContent":["import styled from \"styled-components\";\n\nexport const EmptyDiv = styled.div`\n  visibility:hidden;\n`\n\nexport const DetailWrapper = styled.div`\n  display:flex;\n  align-items:flex-start;\n`;\n\nexport const GraphWrapper =styled.div`\n  display:${props=>props.show?\"block\":\"none\"};\n  overflow:auto;\n  background-color:#f5f5f5;\n`\n\nexport const NavBarWrapper =styled.div`\n  display:${props=>props.show?\"block\":\"none\"};\n  min-height:100vh;\n  overflow:auto;\n  background-color:white;\n  border-left-style:solid;\n  border-color:black;\n  border-width:1px;\n`\n\nexport const ArticleWrapper = styled.div`\n  flex:1;\n  margin-left:auto;\n  min-height:100vh;\n  overflow:auto;\n  padding-bottom: 100px;\n  background-color:white;\n  padding:15px;\n  padding-top:15px;\n`\n\nexport const Header = styled.div`\n  margin: 0 0 20px 0;\n  line-height: 44px;\n  font-size: 34px;\n  color: #333;\n  font-weight: bold;\n`;\n\nexport const Content = styled.div`\n  color: #2f2f2f;\n  img {\n    width: 100%;\n  }\n  p {\n    margin: 25px 0;\n    font-size: 16px;\n    line-height: 30px;\n  }\n  b {\n    font-weight: bold;\n  }\n`;\n","import React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Prism as SyntaxHighlighter } from \"react-syntax-highlighter\";\nimport { coy } from \"react-syntax-highlighter/dist/cjs/prism\";\nclass CodeBlock extends PureComponent {\n  static propTypes = {\n    value: PropTypes.string.isRequired,\n    language: PropTypes.string\n  };\n\n  static defaultProps = {\n    language: null\n  };\n\n  render() {\n    const { language, value } = this.props;\n    return (\n      <SyntaxHighlighter language={language} style={coy}>\n        {value}\n      </SyntaxHighlighter>\n    );\n  }\n}\n\nexport default CodeBlock;","import React, { Component } from \"react\";\n//import  * as texme from \"texme\"\nimport * as ReactMarkdown from \"react-markdown\";\nimport MathJax from \"react-mathjax2\";\nimport RemarkMathPlugin from \"remark-math\";\nimport Codeblock from \"./renderer/codeblock\"\nimport { fromJS } from \"immutable\"\nimport 'github-markdown-css'\n//import markdown from \"marked\"\n\nclass MarkdownRenderer extends Component {\n  render() {\n    return (\n      <div>\n      </div>\n    )\n  }\n\n  render() {\n    let props = this.props\n    const newProps = {\n      ...props,\n      plugins: [\n        RemarkMathPlugin,\n      ],\n      renderers: {\n        ...props.renderers,\n        code: Codeblock,\n        math: (p) => {\n          return (\n            <MathJax.Node inline >{p.value}</MathJax.Node>\n          )\n        },\n        inlineMath: (p) => {\n          return (\n            <MathJax.Node inline >{p.value}</MathJax.Node>\n          )\n        },\n      }\n    };\n\n    return (\n      <MathJax.Context input=\"tex\">\n        <div className='markdown-body'>\n          <ReactMarkdown {...newProps} />\n        </div>\n      </MathJax.Context>\n    )\n  }\n}\n\nexport default MarkdownRenderer","import styled from \"styled-components\";\n\nexport const StepBarWrapper=styled.div`\n    padding:10px 20px;\n    height:100%;\n`\nexport const ButtonWrapper=styled.div`\n    display:flex;\n    align-items:center;\n`","import React,{ Component } from \"react\"\nimport {Steps} from \"antd\"\nimport {StepBarWrapper } from \"./style\"\nimport {connect} from \"react-redux\"\nimport {actionCreators} from \"../../store\"\n\nconst {Step} = Steps\n\nclass ReadList extends Component{\n    constructor(props){\n        super(props)\n        this.state={showStep:false}\n    }\n\n    showStepBar(){\n        let prev=this.state.showStep\n        this.setState(\n            {\n                showStep:!prev\n            }\n        )\n    }\n\n    getArticles(){\n        const{ \n            readList,\n            changeArticle\n        } = this.props\n\n        const articles=readList.toJS()\n\n        const steps=[]\n        articles.forEach( (element,idx) => {\n        steps.push(\n            <Step \n            title={element.domain} \n            description={element.title} \n            key={idx}\n            onClick={()=>changeArticle(idx)}\n            />\n        )\n        })\n\n        return steps\n    }\n\n    changeArticle(){\n\n    }\n\n    render(){\n        const {\n            articleIdx\n        } = this.props\n        return (\n        <div>\n            <StepBarWrapper>\n            <Steps progressDot current={articleIdx} direction=\"vertical\" onChange={this.changeArticle}>\n            </Steps>\n            </StepBarWrapper>\n        </div>\n        )\n    }\n}\n\nconst mapState = state => ({\n  readList: state.getIn([\"detail\",\"readList\"]),\n  articleIdx: state.getIn([\"detail\",\"currentArticle\"])\n});\n\nconst mapDispatch = dispatch => ({\n    changeArticle(idx){\n        console.log('hit')\n        dispatch(actionCreators.changeArticleIdx(idx))\n    }\n});\n\nexport default connect(\n    mapState,\n    mapDispatch\n)(ReadList)","import React,{ Component } from \"react\"\nimport {connect} from \"react-redux\"\nimport { Anchor } from 'antd';\nimport MarkNav from 'markdown-navbar';\nimport 'markdown-navbar/dist/navbar.css';\nimport {TopNavBarHeight} from \"../../../../constvars\"\n\nclass MdNavBar extends Component{\n    render(){\n        return (\n        <Anchor>\n            <MarkNav \n            source={this.props.source}\n            headingTopOffset={TopNavBarHeight}></MarkNav>\n        </Anchor>\n        )\n    }\n}\n\nconst mapState = state => ({\n});\n\nconst mapDispatch = dispatch => ({\n});\n\nexport default connect(\n    mapState,\n    mapDispatch\n)(MdNavBar)","import React, { PureComponent } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport { DetailWrapper, Header, Content, ArticleWrapper,  GraphWrapper,  NavBarWrapper } from \"./style\";\nimport MarkdownRenderer from \"../../markdown/index\"\nimport { actionCreators } from \"./store\";\nimport { actionCreators as headerActionCreator } from \"../../common/header/store\"\nimport { ARTICLE_TOOL_BAR } from \"../../common/header/store/constants\"\nimport ReadList from \"./components/stepbar\";\nimport MdNavBar from \"./components/navbar\"\nimport TopicGraph from \"./components/articlebrowser\"\n\nclass Detail extends PureComponent {\n  constructor(props){\n    super(props)\n  }\n\n  componentWillUnmount() {\n    const {\n      resetStore\n    } = this.props\n    resetStore()\n  }\n\n  render() {\n    const { content } = this.props\n    return (\n      <div>\n        <GraphWrapper show={this.props.showReadList}>\n          <TopicGraph />\n        </GraphWrapper>\n\n        <DetailWrapper>\n          <ArticleWrapper>\n            <Header>{this.props.title}</Header>\n            <span style={{color: \"#85A8EC\",position:\"relative\",bottom:8}}>本文作者:{this.props.authorName}</span>\n            <span style={{color: \"#969696\",position:\"relative\",bottom:8,left:20}}>最后发布于:{this.props.publishTime}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;浏览数:{this.props.readNum}</span>\n            <span onClick={this.favorArticle.bind(this)} style={{cursor:\"pointer\",color: \"#F08140\", position:\"relative\",bottom:8,left:40}}><img width=\"20vw\" height=\"20vw\" src={this.props.logoSvg}/>收藏</span>\n            <MarkdownRenderer source={this.props.content}></MarkdownRenderer>\n          </ArticleWrapper>\n          <NavBarWrapper show={this.props.showArticleIndex}>\n            <MdNavBar source={content} />\n          </NavBarWrapper>\n        </DetailWrapper>\n      </div>\n    );\n  }\n  favorArticle()\n  {\n    this.props.favorArticle(this.props.match.params.id)\n  }\n  componentDidMount() {\n    this.props.getDetail(this.props.match.params.id);\n    //this.props.getReadList()\n    this.props.showToolBar()\n  }\n}\n\nconst mapState = state => ({\n  authorName:state.getIn([\"detail\",\"authorName\"]),\n  publishTime:state.getIn([\"detail\",\"publishTime\"]),\n  readNum:state.getIn([\"detail\",\"readNum\"]),\n  logoSvg:state.getIn([\"detail\",\"logoSvg\"]),\n  title: state.getIn([\"detail\", \"title\"]),\n  content: state.getIn([\"detail\", \"content\"]),\n  showReadList: state.getIn([\"detail\", \"showReadList\"]),\n  showArticleIndex: state.getIn([\"detail\", \"showArticleIndex\"]),\n  readList: state.getIn([\"detail\", \"readList\"])\n});\n\nconst mapDispatch = dispatch => ({\n  getDetail(id) {\n    dispatch(actionCreators.getDetail(id));\n  },\n  favorArticle(id)\n  {\n    dispatch(actionCreators.favorArticle(id))\n  },\n  showToolBar() {\n    dispatch(headerActionCreator.changeToolBar(ARTICLE_TOOL_BAR))\n  },\n  getReadList() {\n    dispatch(actionCreators.getReadList(1))\n  },\n  resetStore() {\n    console.log('invoked')\n    dispatch(actionCreators.resetStore())\n  }\n});\n\nexport default connect(\n  mapState,\n  mapDispatch\n)(withRouter(Detail));\n"],"sourceRoot":""}